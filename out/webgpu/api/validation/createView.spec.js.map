{"version":3,"sources":["../../../../src/webgpu/api/validation/createView.spec.ts"],"names":["description","C","makeTestGroup","ValidationTest","ARRAY_LAYER_COUNT_2D","MIP_LEVEL_COUNT","FORMAT","F","createTexture","options","width","height","arrayLayerCount","mipLevelCount","sampleCount","device","size","depth","dimension","format","usage","GPUTextureUsage","SAMPLED","getDescriptor","baseMipLevel","baseArrayLayer","g","test","params","_success","TextureViewDimension","E2dArray","fn","t","texture","descriptor","expectValidationError","createView","E2d","TextureFormat","RGBA8Unorm","R8Unorm","Cube","CubeArray","nonSquareTexture","commandEncoder","createCommandEncoder","renderPass","beginRenderPass","colorAttachments","attachment","loadValue","r","b","a","endPass","destroy","finish"],"mappings":"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","sourcesContent":["export const description = `\ncreateView validation tests.\n`;\n\nimport * as C from '../../../common/constants.js';\nimport { makeTestGroup } from '../../../common/framework/test_group.js';\n\nimport { ValidationTest } from './validation_test.js';\n\nconst ARRAY_LAYER_COUNT_2D = 6;\nconst MIP_LEVEL_COUNT: number = 6;\nconst FORMAT: GPUTextureFormat = 'rgba8unorm';\n\nclass F extends ValidationTest {\n  createTexture(\n    options: {\n      width?: number;\n      height?: number;\n      arrayLayerCount?: number;\n      mipLevelCount?: number;\n      sampleCount?: number;\n    } = {}\n  ): GPUTexture {\n    const {\n      width = 32,\n      height = 32,\n      arrayLayerCount = 1,\n      mipLevelCount = MIP_LEVEL_COUNT,\n      sampleCount = 1,\n    } = options;\n\n    return this.device.createTexture({\n      size: { width, height, depth: arrayLayerCount },\n      mipLevelCount,\n      sampleCount,\n      dimension: '2d',\n      format: FORMAT,\n      usage: GPUTextureUsage.SAMPLED,\n    });\n  }\n\n  getDescriptor(\n    options: {\n      format?: GPUTextureFormat;\n      dimension?: GPUTextureViewDimension;\n      baseMipLevel?: number;\n      mipLevelCount?: number;\n      baseArrayLayer?: number;\n      arrayLayerCount?: number;\n    } = {}\n  ): GPUTextureViewDescriptor {\n    const {\n      format = FORMAT,\n      dimension = '2d',\n      baseMipLevel = 0,\n      mipLevelCount = MIP_LEVEL_COUNT,\n      baseArrayLayer = 0,\n      arrayLayerCount = 1,\n    } = options;\n    return {\n      format,\n      dimension,\n      baseMipLevel,\n      mipLevelCount,\n      baseArrayLayer,\n      arrayLayerCount,\n    };\n  }\n}\n\nexport const g = makeTestGroup(F);\n\ng.test('creating_texture_view_on_a_2D_non_array_texture')\n  .params([\n    { _success: true }, // default view works\n    { arrayLayerCount: 1, _success: true }, // it is OK to create a 2D texture view on a 2D texture\n    { arrayLayerCount: 2, _success: false }, // it is an error to view a layer past the end of the texture\n    { dimension: C.TextureViewDimension.E2dArray, arrayLayerCount: 1, _success: true }, // it is OK to create a 1-layer 2D array texture view on a 2D texture\n    // mip level is in range\n    { mipLevelCount: 1, baseMipLevel: MIP_LEVEL_COUNT - 1, _success: true },\n    { mipLevelCount: 2, baseMipLevel: MIP_LEVEL_COUNT - 2, _success: true },\n    // baseMipLevel == k && mipLevelCount == 0 means to use levels k..end\n    { mipLevelCount: 0, baseMipLevel: 0, _success: true },\n    { mipLevelCount: 0, baseMipLevel: 1, _success: true },\n    { mipLevelCount: 0, baseMipLevel: MIP_LEVEL_COUNT - 1, _success: true },\n    { mipLevelCount: 0, baseMipLevel: MIP_LEVEL_COUNT, _success: false },\n    // it is an error to make the mip level out of range\n    { mipLevelCount: MIP_LEVEL_COUNT + 1, baseMipLevel: 0, _success: false },\n    { mipLevelCount: MIP_LEVEL_COUNT, baseMipLevel: 1, _success: false },\n    { mipLevelCount: 2, baseMipLevel: MIP_LEVEL_COUNT - 1, _success: false },\n    { mipLevelCount: 1, baseMipLevel: MIP_LEVEL_COUNT, _success: false },\n  ])\n  .fn(async t => {\n    const { dimension = '2d', arrayLayerCount, mipLevelCount, baseMipLevel, _success } = t.params;\n\n    const texture = t.createTexture({ arrayLayerCount: 1 });\n\n    const descriptor = t.getDescriptor({\n      dimension,\n      arrayLayerCount,\n      mipLevelCount,\n      baseMipLevel,\n    });\n\n    t.expectValidationError(() => {\n      texture.createView(descriptor);\n    }, !_success);\n  });\n\ng.test('creating_texture_view_on_a_2D_array_texture')\n  .params([\n    { _success: true }, // default view works\n    { dimension: C.TextureViewDimension.E2d, arrayLayerCount: 1, _success: true }, // it is OK to create a 2D texture view on a 2D array texture\n    { arrayLayerCount: ARRAY_LAYER_COUNT_2D, _success: true }, // it is OK to create a 2D array texture view on a 2D array texture\n    // baseArrayLayer == k && arrayLayerCount == 0 means to use layers k..end.\n    { arrayLayerCount: 0, baseArrayLayer: 0, _success: true },\n    { arrayLayerCount: 0, baseArrayLayer: 1, _success: true },\n    { arrayLayerCount: 0, baseArrayLayer: ARRAY_LAYER_COUNT_2D - 1, _success: true },\n    { arrayLayerCount: 0, baseArrayLayer: ARRAY_LAYER_COUNT_2D, _success: false },\n    // It is an error for the array layer range of the view to exceed that of the texture\n    { arrayLayerCount: ARRAY_LAYER_COUNT_2D + 1, baseArrayLayer: 0, _success: false },\n    { arrayLayerCount: ARRAY_LAYER_COUNT_2D, baseArrayLayer: 1, _success: false },\n    { arrayLayerCount: 2, baseArrayLayer: ARRAY_LAYER_COUNT_2D - 1, _success: false },\n    { arrayLayerCount: 1, baseArrayLayer: ARRAY_LAYER_COUNT_2D, _success: false },\n  ])\n  .fn(async t => {\n    const { dimension = '2d-array', arrayLayerCount, baseArrayLayer, _success } = t.params;\n\n    const texture = t.createTexture({ arrayLayerCount: ARRAY_LAYER_COUNT_2D });\n\n    const descriptor = t.getDescriptor({\n      dimension,\n      arrayLayerCount,\n      baseArrayLayer,\n    });\n\n    t.expectValidationError(() => {\n      texture.createView(descriptor);\n    }, !_success);\n  });\n\ng.test('Using_defaults_validates_the_same_as_setting_values_for_more_than_1_array_layer')\n  .params([\n    { _success: true },\n    { format: C.TextureFormat.RGBA8Unorm, _success: true },\n    { format: C.TextureFormat.R8Unorm, _success: false },\n    { dimension: C.TextureViewDimension.E2dArray, _success: true },\n    { dimension: C.TextureViewDimension.E2d, _success: false },\n    { arrayLayerCount: ARRAY_LAYER_COUNT_2D, _success: false }, // setting array layers to non-0 means the dimensionality will default to 2D so by itself it causes an error.\n    {\n      arrayLayerCount: ARRAY_LAYER_COUNT_2D,\n      dimension: C.TextureViewDimension.E2dArray,\n      _success: true,\n    },\n    {\n      arrayLayerCount: ARRAY_LAYER_COUNT_2D,\n      dimension: C.TextureViewDimension.E2dArray,\n      mipLevelCount: MIP_LEVEL_COUNT,\n      _success: true,\n    },\n  ])\n  .fn(async t => {\n    const { format, dimension, arrayLayerCount, mipLevelCount, _success } = t.params;\n\n    const texture = t.createTexture({ arrayLayerCount: ARRAY_LAYER_COUNT_2D });\n\n    const descriptor = { format, dimension, arrayLayerCount, mipLevelCount };\n\n    t.expectValidationError(() => {\n      texture.createView(descriptor);\n    }, !_success);\n  });\n\ng.test('Using_defaults_validates_the_same_as_setting_values_for_only_1_array_layer')\n  .params([\n    { _success: true },\n    { format: C.TextureFormat.RGBA8Unorm, _success: true },\n    { format: C.TextureFormat.R8Unorm, _success: false },\n    { dimension: C.TextureViewDimension.E2dArray, _success: true },\n    { dimension: C.TextureViewDimension.E2d, _success: true },\n    { arrayLayerCount: 0, _success: true },\n    { arrayLayerCount: 1, _success: true },\n    { arrayLayerCount: 2, _success: false },\n    { mipLevelCount: MIP_LEVEL_COUNT, _success: true },\n    { mipLevelCount: 1, _success: true },\n  ])\n  .fn(async t => {\n    const { format, dimension, arrayLayerCount, mipLevelCount, _success } = t.params;\n\n    const texture = t.createTexture({ arrayLayerCount: 1 });\n\n    const descriptor = { format, dimension, arrayLayerCount, mipLevelCount };\n\n    t.expectValidationError(() => {\n      texture.createView(descriptor);\n    }, !_success);\n  });\n\ng.test('creating_cube_map_texture_view')\n  .params([\n    { dimension: C.TextureViewDimension.Cube, arrayLayerCount: 6, _success: true }, // it is OK to create a cube map texture view with arrayLayerCount == 6\n    // it is an error to create a cube map texture view with arrayLayerCount != 6\n    { dimension: C.TextureViewDimension.Cube, arrayLayerCount: 3, _success: false },\n    { dimension: C.TextureViewDimension.Cube, arrayLayerCount: 7, _success: false },\n    { dimension: C.TextureViewDimension.Cube, arrayLayerCount: 12, _success: false },\n    { dimension: C.TextureViewDimension.Cube, _success: false },\n    { dimension: C.TextureViewDimension.CubeArray, arrayLayerCount: 12, _success: true }, // it is OK to create a cube map array texture view with arrayLayerCount % 6 == 0\n    // it is an error to create a cube map array texture view with arrayLayerCount % 6 != 0\n    { dimension: C.TextureViewDimension.CubeArray, arrayLayerCount: 11, _success: false },\n    { dimension: C.TextureViewDimension.CubeArray, arrayLayerCount: 13, _success: false },\n  ])\n  .fn(async t => {\n    const { dimension = '2d-array', arrayLayerCount, _success } = t.params;\n\n    const texture = t.createTexture({ arrayLayerCount: 16 });\n\n    const descriptor = t.getDescriptor({\n      dimension,\n      arrayLayerCount,\n    });\n\n    t.expectValidationError(() => {\n      texture.createView(descriptor);\n    }, !_success);\n  });\n\ng.test('creating_cube_map_texture_view_with_a_non_square_texture')\n  .params([\n    { dimension: C.TextureViewDimension.Cube, arrayLayerCount: 6 }, // it is an error to create a cube map texture view with width != height.\n    { dimension: C.TextureViewDimension.CubeArray, arrayLayerCount: 12 }, // it is an error to create a cube map array texture view with width != height.\n  ])\n  .fn(async t => {\n    const { dimension, arrayLayerCount } = t.params;\n\n    const nonSquareTexture = t.createTexture({\n      arrayLayerCount: 18,\n      width: 32,\n      height: 16,\n      mipLevelCount: 5,\n    });\n\n    const descriptor = t.getDescriptor({\n      dimension,\n      arrayLayerCount,\n    });\n\n    t.expectValidationError(() => {\n      nonSquareTexture.createView(descriptor);\n    });\n  });\n\n// TODO: add more tests when rules are fully implemented.\ng.test('test_the_format_compatibility_rules_when_creating_a_texture_view').fn(async t => {\n  const texture = t.createTexture({ arrayLayerCount: 1 });\n\n  const descriptor = t.getDescriptor({\n    format: 'depth24plus-stencil8',\n  });\n\n  // it is invalid to create a view in depth-stencil format on a RGBA texture\n  t.expectValidationError(() => {\n    texture.createView(descriptor);\n  });\n});\n\ng.test('it_is_invalid_to_use_a_texture_view_created_from_a_destroyed_texture').fn(async t => {\n  const texture = t.createTexture({ arrayLayerCount: 1 });\n\n  const commandEncoder = t.device.createCommandEncoder();\n  const renderPass = commandEncoder.beginRenderPass({\n    colorAttachments: [\n      {\n        attachment: texture.createView(),\n        loadValue: { r: 1.0, g: 0.0, b: 0.0, a: 1.0 },\n      },\n    ],\n  });\n  renderPass.endPass();\n\n  texture.destroy();\n\n  t.expectValidationError(() => {\n    commandEncoder.finish();\n  });\n});\n\n// TODO: Add tests for TextureAspect\n"],"file":"createView.spec.js"}