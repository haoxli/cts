{"version":3,"file":"vector.spec.js","names":["description","makeTestGroup","keysOf","ShaderValidationTest","g","kCases","vec2_i32","wgsl","ok","vec3_i32","vec4_i32","vec2_u32","vec3_u32","vec4_u32","vec2_f32","vec3_f32","vec4_f32","vec2_f16","vec3_f16","vec4_f16","vec2i","vec3i","vec4i","vec2u","vec3u","vec4u","vec2f","vec3f","vec4f","vec2h","vec3h","vec4h","trailing_comma","aliased_el_ty","vec","vec_f32","vec1_i32","vec5_u32","missing_el_ty","missing_t_left","missing_t_right","vec_of_array","vec_of_runtime_array","vec_of_struct","vec_of_atomic","vec_of_matrix","vec_of_vec","test","desc","params","u","combine","beforeAllSubcases","t","c","case","indexOf","selectDeviceOrSkipTestCase","fn","expectCompileResult"],"sources":["../../../../../src/webgpu/shader/validation/types/vector.spec.ts"],"sourcesContent":["export const description = `\nValidation tests for vector types\n`;\n\nimport { makeTestGroup } from '../../../../common/framework/test_group.js';\nimport { keysOf } from '../../../../common/util/data_tables.js';\nimport { ShaderValidationTest } from '../shader_validation_test.js';\n\nexport const g = makeTestGroup(ShaderValidationTest);\n\nconst kCases = {\n  // Valid vector types\n  vec2_i32: { wgsl: 'alias T = vec2<i32>;', ok: true },\n  vec3_i32: { wgsl: 'alias T = vec3<i32>;', ok: true },\n  vec4_i32: { wgsl: 'alias T = vec4<i32>;', ok: true },\n  vec2_u32: { wgsl: 'alias T = vec2<u32>;', ok: true },\n  vec3_u32: { wgsl: 'alias T = vec3<u32>;', ok: true },\n  vec4_u32: { wgsl: 'alias T = vec4<u32>;', ok: true },\n  vec2_f32: { wgsl: 'alias T = vec2<f32>;', ok: true },\n  vec3_f32: { wgsl: 'alias T = vec3<f32>;', ok: true },\n  vec4_f32: { wgsl: 'alias T = vec4<f32>;', ok: true },\n  vec2_f16: { wgsl: 'enable f16;\\nalias T = vec2<f16>;', ok: true },\n  vec3_f16: { wgsl: 'enable f16;\\nalias T = vec3<f16>;', ok: true },\n  vec4_f16: { wgsl: 'enable f16;\\nalias T = vec4<f16>;', ok: true },\n\n  // Pre-declared type aliases\n  vec2i: { wgsl: 'const c : vec2i = vec2<i32>();', ok: true },\n  vec3i: { wgsl: 'const c : vec3i = vec3<i32>();', ok: true },\n  vec4i: { wgsl: 'const c : vec4i = vec4<i32>();', ok: true },\n  vec2u: { wgsl: 'const c : vec2u = vec2<u32>();', ok: true },\n  vec3u: { wgsl: 'const c : vec3u = vec3<u32>();', ok: true },\n  vec4u: { wgsl: 'const c : vec4u = vec4<u32>();', ok: true },\n  vec2f: { wgsl: 'const c : vec2f = vec2<f32>();', ok: true },\n  vec3f: { wgsl: 'const c : vec3f = vec3<f32>();', ok: true },\n  vec4f: { wgsl: 'const c : vec4f = vec4<f32>();', ok: true },\n  vec2h: { wgsl: 'enable f16;\\nconst c : vec2h = vec2<f16>();', ok: true },\n  vec3h: { wgsl: 'enable f16;\\nconst c : vec3h = vec3<f16>();', ok: true },\n  vec4h: { wgsl: 'enable f16;\\nconst c : vec4h = vec4<f16>();', ok: true },\n\n  // pass\n  trailing_comma: { wgsl: 'alias T = vec3<u32,>;', ok: true },\n  aliased_el_ty: { wgsl: 'alias EL = i32;\\nalias T = vec3<EL>;', ok: true },\n\n  // invalid\n  vec: { wgsl: 'alias T = vec;', ok: false },\n  vec_f32: { wgsl: 'alias T = vec<f32>;', ok: false },\n  vec1_i32: { wgsl: 'alias T = vec1<i32>;', ok: false },\n  vec5_u32: { wgsl: 'alias T = vec5<u32>;', ok: false },\n  missing_el_ty: { wgsl: 'alias T = vec3<>;', ok: false },\n  missing_t_left: { wgsl: 'alias T = vec3 u32>;', ok: false },\n  missing_t_right: { wgsl: 'alias T = vec3<u32;', ok: false },\n  vec_of_array: { wgsl: 'alias T = vec3<array<i32, 2>>;', ok: false },\n  vec_of_runtime_array: { wgsl: 'alias T = vec3<array<i32>>;', ok: false },\n  vec_of_struct: { wgsl: 'struct S { i : i32 }\\nalias T = vec3<S>;', ok: false },\n  vec_of_atomic: { wgsl: 'alias T = vec3<atomic<i32>>;', ok: false },\n  vec_of_matrix: { wgsl: 'alias T = vec3<mat2x2f>;', ok: false },\n  vec_of_vec: { wgsl: 'alias T = vec3<vec2f>;', ok: false },\n};\n\ng.test('vector')\n  .desc('Tests validation of vector types')\n  .params(\n    u => u.combine('case', keysOf(kCases)) //\n  )\n  .beforeAllSubcases(t => {\n    const c = kCases[t.params.case];\n    if (c.wgsl.indexOf('enable f16') >= 0) {\n      t.selectDeviceOrSkipTestCase('shader-f16');\n    }\n  })\n  .fn(t => {\n    const c = kCases[t.params.case];\n    t.expectCompileResult(c.ok, c.wgsl);\n  });\n"],"mappings":"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"}